<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:py="http://genshi.edgewall.org/"
  xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="../master.html" />
  <head>
    <title>${_('Groups List')}</title>
  </head>
  <body>
    <?python from fas import auth ?>
    <h2>${_('List (%s)') % search}</h2>
    <h3>${_('Search Groups')}</h3>
    <form method="get" action="${tg.url('/group/list')}">
      <p>${_('"*" is a wildcard (Ex: "cvs*")')}</p>
      <div>
        <input type="text" value="${search}" name="search" size="15 "/>
        <input type="submit" value="${_('Search')}" />
      </div>
    </form>
    <h3>${_('Results')}</h3>
    <ul class="letters">
      <li py:for="letter in 'abcdefghijklmnopqrstuvwxyz'.upper()"><a href="${tg.url('/group/list/%s*' % letter)}">${letter}</a></li>
      <li><a href="${tg.url('/group/list/*')}">${_('All')}</a></li>
    </ul>

    <table py:if="groups">
      <thead>
        <tr><th>${_('Group')}</th><th>${_('Description')}</th><th>${_('Status')}</th></tr>
      </thead>
      <tbody>
        <tr py:for="group in groups">
        <div py:if="auth.canViewGroup(person, group)" py:strip="">
          <td><a href="${tg.url('/group/view/%s' % group.name)}">${group.name}</a></td>
          <td>${ group.display_name }</td>
          <td>
            <a py:if="group in person.roles" href="${tg.url('/group/view/%s' % group)}">
              <!--<span class="approved" py:if="myGroups[group].fedoraRoleStatus.lower() == 'approved'">${_('Approved')}</span>
              <span class="unapproved" py:if="myGroups[group].fedoraRoleStatus.lower() == 'unapproved'">${_('Unapproved')}</span>-->
            </a>
            <a py:if="group not in person.roles" href="${tg.url('/group/apply/%s/%s' % (group, person))}"><span>${_('Apply')}</span></a>
          </td>
        </div>
        </tr>
      </tbody>
    </table>
  </body>
</html>
